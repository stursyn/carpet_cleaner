<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

  <changeSet author="stursyn" id="order_table">
    <sql endDelimiter=";;"><![CDATA[
      create table customer (
        id varchar(100) not null primary key,
        name varchar(255),
        surname varchar(255),
        patronymic varchar(255),
        phoneNumber varchar(255)
      );;

      create table customer_address (
        id varchar(100) not null primary key,
        customerId varchar(100) references customer(id),
        longitude numeric,
        latitude numeric
      );;

      create table clean_order (
        id varchar(100) not null primary key,
        customerId varchar(100) references customer(id),
        pickUpAddress varchar(100) references customer_address(id),
        deliveryAddress varchar(100) references customer_address(id),
        pickUpDate timestamp,
        deliveryAddress timestamp,
        cleanStatus varchar(30),
        totalOrderPrice number
      );;

      create table application_dict (
        code varchar(100) not null primary key,
        title varchar(100),
        dictType varchar(30)
      );;

      create table dict_parent_relation (
        parentCode varchar(100) not null,
        childCode varchar(100) not null,
        primary key(parentCode, childCode)
      );;

      create table clean_service (
        id varchar(100) not null primary key,
        cleanOrder varchar(100) references clean_order(id),
        merchantCount int,
        merchantType varchar(100) references application_dict(code),
        merchantMaterial varchar(100) references application_dict(code),
        merchantMeasurement varchar(100) references application_dict(code),
        serviceType varchar(100) references application_dict(code),
        servicePrice number
      );;

       
    ]]></sql>
  </changeSet>

</databaseChangeLog>
